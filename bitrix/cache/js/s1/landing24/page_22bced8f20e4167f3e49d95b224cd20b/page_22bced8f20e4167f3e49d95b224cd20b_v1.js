
; /* Start:"a:4:{s:4:"full";s:95:"/bitrix/components/bitrix/landing.landing_view/templates/.default/script.min.js?174073063932015";s:6:"source";s:75:"/bitrix/components/bitrix/landing.landing_view/templates/.default/script.js";s:3:"min";s:79:"/bitrix/components/bitrix/landing.landing_view/templates/.default/script.min.js";s:3:"map";s:79:"/bitrix/components/bitrix/landing.landing_view/templates/.default/script.map.js";}"*/
(function(){"use strict";BX.namespace("BX.Landing.Component.View");BX.Landing.Component.View=function(e){};BX.Landing.Component.View.instance=null;BX.Landing.Component.View.getInstance=function(){return BX.Landing.Component.View.instance};BX.Landing.Component.View.create=function(e,n){e.topInit=n===true;BX.Landing.Component.View.instance=new BX.Landing.Component.View(e);BX.Landing.Component.View.instance.setNewOptions(e);BX.Landing.Component.View.instance.init();return BX.Landing.Component.View.instance};BX.Landing.Component.View.loadEditor=function(){var e=new BX.Landing.Component.View({});var n=BX.Landing.PageObject.getEditorWindow();var t=BX.Landing.PageObject.getRootWindow();e.loadEditor();e.buildTop();n.addEventListener("load",(function(){BX.Landing.UI.Panel.StylePanel.getInstance();t.BX.Landing.UI.Panel.Top.resetInstance();BX.Landing.UI.Panel.Top.getInstance();n.BX.onCustomEvent("Landing.Editor:load")}))};BX.Landing.Component.View.prototype={setNewOptions:function(e){this.type=e.type||"";this.title=e.title||"";this.url=e.url||"";this.formEditor=e.specialType==="crm_forms";this.topInit=e.topInit||false;this.active=e.active||false;this.draftMode=e.draftMode||false;this.id=e.id||0;this.siteId=e.siteId||0;this.siteTitle=e.siteTitle||"";this.storeEnabled=e.storeEnabled||false;this.fullPublication=e.fullPublication||false;this.urls=e.urls||{};this.rights=e.rights||{};this.helperFrameOpenUrl=e.helperFrameOpenUrl||null;this.helpCodes=e.helpCodes||{};this.sliderConditions=e.sliderConditions||[];this.sliderFullConditions=e.sliderFullConditions||[];top.window.autoPublicationEnabled=!!e.autoPublicationEnabled;if(!this.rights.public){top.window.autoPublicationEnabled=false}if(this.helperFrameOpenUrl){BX.Helper.init({frameOpenUrl:this.helperFrameOpenUrl,langId:BX.message("LANGUAGE_ID")})}},init:function(){var e=BX.Landing.Component.View.getInstance();if(typeof BX.rest!=="undefined"&&typeof BX.rest.Marketplace!=="undefined"){BX.rest.Marketplace.bindPageAnchors({})}BX.addCustomEvent(window,"Rest:AppLayout:ApplicationInstall",(function(e){if(e){}}));if(this.topInit){BX.addCustomEvent("SidePanel.Slider:onMessage",(function(e){if(e.getEventId()==="landingEditClose"){setTimeout((function(){window.location.reload()}),1e3)}}))}if(!this.topInit){BX.addCustomEvent("BX.Landing.Block:init",(function(n){if(n.data.requiredUserActionIsShown){BX.bind(n.data.button,"click",(function(){e.onRequiredLinkClick(this)}))}}));var n=[].slice.call(document.querySelectorAll(".landing-required-link"));n.forEach((function(n,t){BX.bind(n,"click",(function(){e.onRequiredLinkClick(this)}))}));var t=BX.Landing.PageObject.getBlocks();for(var i=0,a=t.length;i<a;i++){if(!t[i].isAllowedByTariff()){var o=BX.create("div",{props:{className:"landing-block-expired-overlay"}});t[i].node.appendChild(o)}}}if(this.topInit){var s=BX.Landing.PageObject.getEditorWindow();var l=BX.Landing.PageObject.getRootWindow();s.addEventListener("load",(function(){BX.Landing.UI.Panel.StylePanel.getInstance();l.BX.Landing.UI.Panel.Top.resetInstance();BX.Landing.UI.Panel.Top.getInstance()}))}if(this.topInit){this.buildTop();this.initSliders();this.loadEditor();this.hideEditorsPanelHandlers()}},initSliders:function(){if(typeof BX.SidePanel==="undefined"){return}const e=[];for(let n=0,t=this.sliderConditions.length;n<t;n++){e.push(this.sliderConditions[n])}const n=this.sliderFullConditions;if(e.length<=0&&n.length<=0){return}const t=top.BX.clone({rules:[{condition:e,stopParameters:["action","fields%5Bdelete%5D","nav"],options:{allowChangeHistory:false}}]});BX.SidePanel.Instance.bindAnchors(t);const i=top.BX.clone({rules:[{condition:n,options:{allowChangeHistory:false,customLeftBoundary:0,cacheable:false}}]});BX.SidePanel.Instance.bindAnchors(i)},loadEditor:function(){var e=document.querySelector(".landing-editor-loader-container");var n=document.querySelector(".landing-editor-required-user-action");if(e){var t=new BX.Loader({offset:{top:"-70px"}});t.show(e);BX.Landing.PageObject.getInstance().view().then((function(t){BX.bindOnce(t,"load",(function(){var i=BX.Landing.Main.getInstance().options.requiredUserAction;if(BX.Landing.Utils.isPlainObject(i)&&!BX.Landing.Utils.isEmpty(i)){if(i.header){n.querySelector("h3").innerText=i.header}if(i.description){n.querySelector("p").innerText=i.description}if(i.href){n.querySelector("a").setAttribute("href",i.href)}if(i.text){n.querySelector("a").innerText=i.text}n.classList.add("landing-ui-user-action-show");document.querySelector(".landing-ui-panel-top-history").classList.add("landing-ui-disabled");document.querySelector(".landing-ui-panel-top-devices").classList.add("landing-ui-disabled")}else{t.classList.add("landing-ui-view-show")}setTimeout((function(){BX.Dom.addClass(e,"landing-ui-hide");setTimeout((function(){BX.remove(e);BX.remove(n)}),200)}),300)}))}))}},hideEditorsPanelHandlers:function(){BX.Landing.PageObject.getInstance().top().then((function(e){e.addEventListener("click",(function(){BX.Landing.PageObject.getInstance().view().then((function(e){if(e.contentWindow.BX){if(e.contentWindow.BX.Landing.Node.Text.currentNode){e.contentWindow.BX.Landing.Node.Text.currentNode.disableEdit()}if(e.contentWindow.BX.Landing.UI.Field.BaseField.currentField){e.contentWindow.BX.Landing.UI.Field.BaseField.currentField.disableEdit()}e.contentWindow.BX.Landing.UI.Panel.EditorPanel.getInstance().hide()}}))}))}))},onRequiredLinkClick:function(e){const n=e.getAttribute("href");if(n.substr(0,1)!=="#"){window.open(n,"_top")}let t=n.substr(1);const i={};let a="";if(t.indexOf("@")>0){a=t.split("@")[1];t=t.split("@")[0]}t=t.toUpperCase();const o="PAGE_URL_LANDING_SETTINGS";i.PAGE=t.replace("PAGE_URL_","");if(typeof landingParams[o]!=="undefined"&&typeof BX.SidePanel!=="undefined"){BX.SidePanel.Instance.open(BX.util.add_url_param(landingParams[o],i)+(a?"#"+a:""),{allowChangeHistory:false})}},buildTop:function(e){e=e||{};this.urls=this.urls||{};for(var n in this.urls){var t=BX("landing-urls-"+n);if(t){t.setAttribute("href",this.urls[n])}}const i=BX("landing-popup-publication-btn");if(i&&i.classList.contains("landing-ui-panel-top-pub-btn-enable")){var a=null;var o=null;i.addEventListener("click",function(){var e=this.id,n;const t=this.getErrorMessageBlock();if(t){const e=BX("landing-popup-publication-error-area").getAttribute("data-error");const i=this.getErrorClickHandler(e);n=BX.create("div",{props:{className:"landing-popup-publication-content 1"},children:[t,BX.create("form",{props:{className:"landing-popup-publication-content-block-gray landing-popup-publication-content-center landing-popup-publication-content-block-gray-disabled"},attrs:{target:"_blank",method:"post",action:this.urls["publicationGlobal"]},children:[BX.create("input",{attrs:{type:"hidden",name:"sessid",value:BX.message("bitrix_sessid")}}),BX.create("div",{props:{className:"landing-popup-publication-content-autopub-btn-container"},children:[BX.create("button",{props:{className:"landing-popup-publication-content-autopub-btn ui-btn ui-btn-round ui-btn-no-caps ui-btn-shadow ui-btn-icon-lock ui-btn-light landing-popup-btn-disabled"},attrs:{type:"submit",disabled:true},text:BX.message("LANDING_PUBLICATION_SUBMIT")}),BX.create("div",{props:{className:"landing-popup-publication-content-autopub-btn-clicker"},events:i?{click:i}:null})]})]})]})}else{var i=BX.create("div",{props:{className:"landing-popup-publication-content-hint"}});n=BX.create("div",{props:{className:"landing-popup-publication-content 2"},children:[BX.create("div",{props:{className:"landing-popup-publication-content-block"},children:[BX.create("label",{props:{className:"landing-popup-publication-content-autopub"},children:[BX.create("span",{props:{className:top.window.autoPublicationEnabled?"landing-popup-publication-content-autopub-icon landing-ui-panel-top-pub-btn-auto":"landing-popup-publication-content-autopub-icon"},html:'<svg class="landing-ui-panel-top-pub-btn-icon" width="25" height="25" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg">'+'<path class="landing-ui-panel-top-pub-btn-icon-defs-cloud" fill="#C6CDD3" d="M18.5075 18.8896H10.4177C10.3485 18.8896 10.2799 18.887 10.2119 18.882C8.38363 18.8398 6.91434 17.3271 6.91434 15.4671C6.91487 14.5606 7.27128 13.6914 7.90517 13.0507C8.2301 12.7223 8.61429 12.4678 9.03227 12.2978C9.02528 12.2055 9.02172 12.1123 9.02172 12.0182C9.02229 11.0617 9.39838 10.1446 10.0672 9.46862C10.7361 8.79266 11.6429 8.41324 12.5883 8.41382C13.7992 8.41531 14.8683 9.02804 15.5108 9.96325C15.816 9.85386 16.1444 9.79441 16.4866 9.79459C17.9982 9.79643 19.2397 10.9624 19.3836 12.4534C20.832 12.7729 21.9159 14.0785 21.9146 15.6395C21.9131 17.4385 20.4711 18.8958 18.6932 18.895C18.6309 18.895 18.569 18.8932 18.5075 18.8896Z" fill-rule="evenodd" clip-rule="evenodd"/>\n'+'<path class="landing-ui-panel-top-pub-btn-icon-defs-success" fill="#FFFFFF" d="M7.46967 13.782L9.1093 12.14L12.2726 15.2532L18.6078 8.91091L20.2474 10.5529L12.2881 18.5218L7.46967 13.782Z" fill-rule="evenodd" clip-rule="evenodd"/>\n'+'<path class="landing-ui-panel-top-pub-btn-icon-defs-error" fill="#FF7975" d="M19.8991 9.8334L17.607 7.54126L7.00036 18.1479L9.2925 20.44L19.8991 9.8334Z"/>\n'+'<path class="landing-ui-panel-top-pub-btn-icon-defs-error" fill="#FFFFFF" d="M19.9323 10.0725C20.2657 9.73913 20.2657 9.19867 19.9323 8.86532C19.599 8.53198 19.0585 8.53198 18.7252 8.86532L8.6579 18.9326C8.32455 19.266 8.32455 19.8064 8.6579 20.1398C8.99124 20.4731 9.5317 20.4731 9.86505 20.1398L19.9323 10.0725Z"/>'+"</svg>"}),BX.create("span",{props:{className:"landing-popup-publication-content-autopub-text"},html:BX.message("LANDING_PUBLICATION_AUTO")}),BX.create("input",{props:{className:"landing-popup-publication-content-autopub-input"},attrs:{type:"checkbox",checked:top.window.autoPublicationEnabled},events:{click:function(){top.window.autoPublicationEnabled=this.checked;BX.ajax({url:BX.util.add_url_param(window.location.href,{action:"changeAutoPublication"}),method:"POST",data:{param:this.checked?"Y":"N",sessid:BX.message("bitrix_sessid"),actionType:"json"},dataType:"json",onsuccess:n=>{BX.removeClass(BX("landing-popup-publication-btn"),"landing-ui-panel-top-pub-btn-error");if(this.checked){BX.addClass(BX("landing-popup-publication-btn"),"landing-ui-panel-top-pub-btn-auto");BX.addClass(BX("landing-popup-publication-btn"),"landing-ui-panel-top-pub-btn-loader");BX.addClass(document.body.querySelector(".landing-popup-publication-content-autopub-icon"),"landing-ui-panel-top-pub-btn-auto");BX.Landing.Backend.getInstance().action("Landing::publication",{lid:e}).then((()=>{BX.removeClass(BX("landing-popup-publication-btn"),"landing-ui-panel-top-pub-btn-loader")}))}else{BX.removeClass(BX("landing-popup-publication-btn"),"landing-ui-panel-top-pub-btn-auto");BX.removeClass(document.body.querySelector(".landing-popup-publication-content-autopub-icon"),"landing-ui-panel-top-pub-btn-auto")}}})}}}),BX.create("span",{props:{className:"landing-popup-publication-content-autopub-switcher"},children:[BX.create("span",{props:{className:"landing-popup-publication-content-autopub-switcher-on"},text:BX.message("LANDING_PUBLICATION_AUTO_TOGGLE_ON")}),BX.create("span",{props:{className:"landing-popup-publication-content-autopub-switcher-off"},text:BX.message("LANDING_PUBLICATION_AUTO_TOGGLE_OFF")})]})]})]}),BX.create("div",{props:{className:"landing-popup-publication-content-block-gray landing-popup-publication-content-center landing-popup-publication-content-column",style:{position:"relative"}},children:[i,BX.create("form",{attrs:{target:"_blank",method:"post",action:this.urls["preview"]},children:[BX.create("input",{attrs:{type:"hidden",name:"sessid",value:BX.message("bitrix_sessid")}}),BX.create("button",{props:{className:"landing-popup-publication-content-preview-btn ui-btn ui-btn-round ui-btn-no-caps ui-btn-shadow ui-btn-light"},attrs:{type:"submit"},text:BX.message("LANDING_TPL_PREVIEW_URL")})]}),BX.create("form",{attrs:{target:"_blank",method:"post",action:this.urls["publicationGlobal"]},children:[BX.create("input",{attrs:{type:"hidden",name:"sessid",value:BX.message("bitrix_sessid")}}),BX.create("button",{props:{className:"landing-popup-publication-content-autopub-btn ui-btn ui-btn-round ui-btn-no-caps ui-btn-shadow ui-btn-success"},attrs:{type:"submit"},text:BX.message("LANDING_PUBLICATION_SUBMIT")})]})]})]});i.appendChild(BX.UI.Hint.createNode(BX.message("LANDING_TPL_PREVIEW_URL_HINT")))}if(!a){a=BX.PopupWindowManager.create("landing-popup-publication",BX("landing-popup-publication-btn"),{content:n,autoHide:true,closeIcon:false,titleBar:false,closeByEsc:true,animation:"fading-slide",noAllPaddings:true,angle:{offset:37},minWidth:410,maxWidth:460,background:"#E9EAED",contentBackground:"transparent"})}else{a.setContent(n)}var o=window.addEventListener("blur",(function(){a.close();window.removeEventListener("blur",o)}));a.toggle();BX.PreventDefault()}.bind(this))}if(BX("landing-popup-preview-btn")){var s=null;BX("landing-popup-preview-btn").addEventListener("click",function(){if(!s){if(top.window.autoPublicationEnabled){const e=BX.Landing.Backend.getInstance();if(this.storeEnabled){e.action("Landing::publication",{lid:this.id}).then((()=>e.action("Site::publication",{id:this.siteId})))}else{e.action("Landing::publication",{lid:this.id})}}var e=BX("landing-popup-preview-btn");var n=this.url;var t=BX.create("div");new QRCode(t,{text:n,width:156,height:156,colorLight:"transparent"});s=BX.PopupWindowManager.create("landing-popup-preview",e,{content:BX.create("div",{props:{className:"landing-popup-preview-content"},children:[BX.create("div",{props:{className:"landing-popup-preview-title"},text:BX.message("LANDING_PREVIEW_MOBILE_TITLE")}),BX.create("div",{props:{className:"landing-popup-preview-qr"},children:[t]}),BX.create("div",{props:{className:"landing-popup-preview-text"},text:BX.message("LANDING_PREVIEW_MOBILE_TEXT")}),BX.create("div",{props:{className:"landing-popup-preview-link-container"},children:[BX.create("a",{props:{className:"landing-popup-preview-link ui-btn ui-btn-light-border ui-btn-round"},text:BX.message("LANDING_PREVIEW_MOBILE_NEW_TAB"),attrs:{target:"_blank",href:n}})]}),BX.create("hr"),BX.create("div",{props:{className:"landing-popup-preview-link-row-container"},children:[BX.create("div",{props:{className:"landing-popup-preview-link-target-container"},children:[BX.create("a",{props:{className:"landing-popup-preview-link-target"},text:function(){if(this.formEditor){return n}else{return BX.data(e,"domain")}}.bind(this)(),attrs:{target:"_blank",href:n}})]}),BX.create("div",{children:[BX.create("a",{props:{className:"landing-popup-preview-link-target-copy"},text:BX.message("LANDING_PREVIEW_MOBILE_COPY_LINK"),attrs:{href:"#"},events:{click:function(){var e=document.createRange();e.selectNode(document.body.querySelector(".landing-popup-preview-link-target"));window.getSelection().addRange(e);try{document.execCommand("copy");BX.UI.Notification.Center.notify({content:BX.message("LANDING_SITE_TILE_POPUP_COPY_LINK_COMPLETE"),autoHideDelay:2e3});window.getSelection().removeAllRanges()}catch(e){BX.UI.Notification.Center.notify({content:"Oops, unable to copy",autoHideDelay:2e3})}}.bind(this)}})]})]})]}),closeIcon:true,closeByEsc:true,noAllPaddings:true,autoHide:true,animation:"fading-slide",angle:{position:"top",offset:75},minWidth:375,maxWidth:375,contentBackground:"transparent"})}var i=window.addEventListener("blur",(function(){s.close();window.removeEventListener("blur",i)}));var a=BX.data(BX("landing-popup-preview-btn"),"form-verification-required")==="1";if(a&&top.BX.Bitrix24&&BX.Type.isObject(BX.Bitrix24.PhoneVerify)){var o=BX.data(BX("landing-popup-preview-btn"),"form-verification-entity");BX.Bitrix24.PhoneVerify.getInstance().setEntityType("crm_webform").setEntityId(o).startVerify({sliderTitle:BX.Loc.getMessage("LANDING_OPEN_FORM_PHONE_VERIFY_CUSTOM_SLIDER_TITLE"),title:BX.Loc.getMessage("LANDING_OPEN_FORM_PHONE_VERIFY_CUSTOM_TITLE"),description:BX.Loc.getMessage("LANDING_OPEN_FORM_PHONE_VERIFY_CUSTOM_DESCRIPTION"),callback:function(e){if(e){s.toggle()}}})}else{s.toggle()}BX.PreventDefault()}.bind(this))}var l=BX.create("div",{props:{className:"landing-popup-features-content-block landing-popup-features-content-block-settings"},html:'<div class="landing-popup-features-content-block-settings-icon ui-icon ui-icon-service-light-settings"><i></i></div>',events:{click:function(){this.onSettingsClick()}.bind(this)}});if(BX("landing-popup-features-btn")){var r=null;BX("landing-popup-features-btn").addEventListener("click",function(){if(!r){var e=BX("landing-popup-features-btn");r=BX.PopupWindowManager.create("landing-popup-features",e,{content:BX.create("div",{props:{className:"landing-popup-features-content"},children:[this.draftMode?null:BX.create("div",{props:{className:"landing-popup-features-content-block landing-popup-features-content-dflex"},children:[BX.create("div",{html:'<div class="ui-icon landing-popup-features-icon-1 ui-icon-md"><i></i></div>'}),BX.create("div",{style:{flexGrow:1},children:[BX.create("div",{props:{className:"landing-popup-features-content-block-title"},text:BX.message("LANDING_TPL_FEATURES_FORMS_TITLE")}),BX.create("a",{props:{className:"landing-popup-features-content-block-link"},text:BX.message("LANDING_TPL_FEATURES_FORMS_PROMO_LINK"),attrs:{href:"#"},events:{click:function(){if(this.helperFrameOpenUrl){BX.Helper.show("redirect=detail&code="+this.helpCodes["form_general"][0])}BX.PreventDefault()}.bind(this)}})]}),BX.create("div",{children:[BX.create("input",{props:{className:"landing-popup-features-content-block-btn ui-btn ui-btn-xs ui-btn-round ui-btn-no-caps ui-btn-light-border"},attrs:{type:"button",value:BX.message("LANDING_TPL_FEATURES_SETTINGS")},events:{click:function(){var e=BX.Landing.PageObject.getEditorWindow();var n=e.document.querySelector('div[data-subtype="form"]');var t=function(e){if(e){var n=e.getAttribute("id").substr(5);if(n){var t=BX.Landing.PageObject.getBlocks().get(n);t.onShowContentPanel()}}};if(!n){var i=BX.Landing.PageObject.getBlocks();BX.Landing.Main.getInstance().currentBlock=i.length<=2?i[1]:i[i.length-2];var a=BX.Landing.Main.getInstance();var o=BX.Landing.PageObject.getEditorWindow();a.currentArea=o.document.body.querySelector(".landing-main");a.onAddBlock("33.13.form_2_light_no_text").then((function(e){e.setAttribute("data-subtype","form");var n=1e3;var i=0;var a=function(){requestAnimationFrame((function(){if(e.querySelector(".b24-form div[id]")){t(e)}else{if(i<n){i+=1;a()}}}))};a()}));t(n)}else{t(n)}r.close()}.bind(this)}})]})]}),this.draftMode?null:BX.create("div",{props:{className:"landing-popup-features-content-block landing-popup-features-content-dflex"},children:[BX.create("div",{html:'<div class="ui-icon ui-icon ui-icon-service-livechat landing-popup-features-icon-2 ui-icon-md"><i></i></div>'}),BX.create("div",{style:{flexGrow:1},children:[BX.create("div",{props:{className:"landing-popup-features-content-block-title"},text:BX.message("LANDING_TPL_FEATURES_OL_TITLE")}),BX.create("a",{props:{className:"landing-popup-features-content-block-link"},text:BX.message("LANDING_TPL_FEATURES_OL_PROMO_LINK"),attrs:{href:"#"},events:{click:function(){if(this.helperFrameOpenUrl){BX.Helper.show("redirect=detail&code="+this.helpCodes["widget_general"][0])}BX.PreventDefault()}.bind(this)}})]}),BX.create("div",{children:[BX.create("input",{props:{className:"landing-popup-features-content-block-btn ui-btn ui-btn-xs ui-btn-round ui-btn-no-caps ui-btn-light-border"},attrs:{type:"button",value:BX.message("LANDING_TPL_FEATURES_SETTINGS")},events:{click:function(){var e=BX.Landing.Main.getInstance().options.hooks["B24BUTTON"];if(e&&e["ID"]){BX.SidePanel.Instance.open("/crm/button/edit/"+e["ID"]+"/",{allowChangeHistory:false,cacheable:false})}else{BX.SidePanel.Instance.open(BX.message["LANDING_PAR_PAGE_URL_SITE_EDIT"]+"#b24widget",{allowChangeHistory:false,cacheable:false})}}.bind(this)}})]})]}),BX.create("div",{props:{className:"landing-popup-features-content-row"},children:[BX.create("div",{style:{marginRight:"12px",flexGrow:1},props:{className:"landing-popup-features-content-block landing-popup-features-content-dflex"},children:[BX.create("div",{html:'<div class="ui-icon ui-icon-service-light-common landing-popup-features-icon-3"><i></i></div>'}),BX.create("div",{children:[BX.create("div",{props:{className:"landing-ui-panel-top-menu-link-help"},text:BX.message("LANDING_TPL_FEATURES_HELP_TITLE_MSGVER_1")}),BX.create("a",{props:{className:"landing-popup-features-content-block-link"},text:BX.message("LANDING_TPL_FEATURES_HELP_PROMO_LINK_MSGVER_1"),attrs:{href:"#"}})]})],events:{click:function(){BX.fireEvent(BX(e.getAttribute("data-feedback")),"click")}}}),l]})]}),closeIcon:false,titleBar:false,closeByEsc:true,animation:"fading-slide",noAllPaddings:true,angle:{position:"top",offset:115},minWidth:410,background:"#E9EAED",contentBackground:"transparent"})}var n=window.addEventListener("blur",(function(){r.close();window.removeEventListener("blur",n)}));r.toggle();BX.PreventDefault()}.bind(this))}else{BX.removeClass(l,"landing-popup-features-content-block");var d=BX("landing-panel-settings-kb");if(BX.Type.isDomNode(d)){d.appendChild(l)}}if(BX("landing-design-block-close")){BX("landing-design-block-close").addEventListener("click",(function(){BX.SidePanel.Instance.close()}))}var c=document.querySelector(".landing-form-editor-share-button");if(BX.Type.isDomNode(c)){BX.Event.bind(c,"click",this.onCrmFormShareButtonClick.bind(this))}var p=document.querySelector(".landing-ui-panel-top-menu-link-settings");if(BX.Type.isDomNode(p)){BX.Event.bind(p,"click",this.onSettingsClick.bind(this))}},onCrmFormShareButtonClick:function(e){e.preventDefault();if(!this.formSharePopup){var n=BX.data(document.querySelector("#landing-popup-preview-btn"),"form-verification-required")!=="1";this.formSharePopup=new BX.Landing.Form.SharePopup({bindElement:e.currentTarget,phoneVerified:n})}this.formSharePopup.show()},getErrorClickHandler:function(e){if(e==="LANDING_PAYMENT_FAILED_BLOCK"){return function(){var e=BX.Landing.PageObject.getBlocks();for(var n=0,t=e.length;n<t;n++){if(!e[n].isAllowedByTariff()){e[n].getBlockNode().scrollIntoView()}}}}else if(e==="FREE_DOMAIN_IS_NOT_ALLOWED"){return function(){BX.UI.InfoHelper.show("limit_free_domen")}}else if(e==="EMAIL_NOT_CONFIRMED"){return function(){BX.UI.InfoHelper.show("limit_sites_confirm_email")}}else if(e==="PHONE_NOT_CONFIRMED"&&top.BX.Bitrix24&&BX.Type.isObject(top.BX.Bitrix24.PhoneVerify)){return function(){top.BX.Bitrix24.PhoneVerify.getInstance().setEntityType("landing_site").setEntityId(this.siteId).startVerify({mandatory:false,callback:function(e){if(e){top.window.location.reload()}}})}.bind(this)}else if(e==="PUBLIC_PAGE_REACHED"||e==="PUBLIC_SITE_REACHED"||e==="PUBLIC_SITE_REACHED_FREE"||e==="TOTAL_SITE_REACHED"){if(e==="PUBLIC_PAGE_REACHED"){return function(){BX.UI.InfoHelper.show("limit_sites_number_page")}}else if(e==="PUBLIC_SITE_REACHED_FREE"){return function(){BX.UI.InfoHelper.show("limit_sites_free")}}else{if(this.storeEnabled){return function(){BX.UI.InfoHelper.show("limit_shop_number")}}else{return function(){BX.UI.InfoHelper.show("limit_sites_number")}}}}else if(e==="SHOP_1C"){return function(){window.open(BX.message("LANDING_PUBLICATION_SHOP_ERROR_1C_BUTTON_LINK"),"_blank")}}return null},getErrorButtonTitle:function(e){if(e==="LANDING_PAYMENT_FAILED_BLOCK"){return BX.message("LANDING_PUBLICATION_GOTO_BLOCK")}else if(e==="EMAIL_NOT_CONFIRMED"||e==="PHONE_NOT_CONFIRMED"){return BX.message("LANDING_PUBLICATION_CONFIRM_EMAIL")}else if(e==="FREE_DOMAIN_IS_NOT_ALLOWED"||e==="PUBLIC_PAGE_REACHED"||e==="PUBLIC_SITE_REACHED"||e==="TOTAL_SITE_REACHED"||e==="PUBLIC_SITE_REACHED_FREE"){return BX.message("LANDING_PUBLICATION_BUY_RENEW")}else if(e==="SHOP_1C"){return BX.message("LANDING_PUBLICATION_SHOP_ERROR_1C_BUTTON")}},getErrorMessageBlock:function(){if(BX("landing-popup-publication-error-area").hasAttribute("data-error")){var e=BX("landing-popup-publication-error-area").getAttribute("data-error");var n=document.querySelector("#landing-popup-publication-error-area");var t=this.getErrorButtonTitle(e);var i=this.getErrorClickHandler(e);return BX.create("div",{props:{className:"landing-popup-publication-error-content-block landing-popup-features-content-dflex"},children:[BX.create("div",{props:{className:"landing-popup-publication-error-content-icon"},html:'<svg width="36" height="37" viewBox="0 0 36 37" fill="none" xmlns="http://www.w3.org/2000/svg"><path opacity="0.189937" d="M18 36.5C27.9411 36.5 36 28.4411 36 18.5C36 8.55887 27.9411 0.5 18 0.5C8.05887 0.5 0 8.55887 0 18.5C0 28.4411 8.05887 36.5 18 36.5Z" fill="white"/><path fill-rule="evenodd" clip-rule="evenodd" d="M23.1036 24.1965H13.238C13.1535 24.1965 13.0699 24.1933 12.987 24.1871C10.7573 24.1352 8.96548 22.2714 8.96548 19.98C8.96613 18.8631 9.40079 17.7923 10.1738 17.003C10.5701 16.5984 11.0386 16.2848 11.5484 16.0754C11.5398 15.9617 11.5355 15.8468 11.5355 15.731C11.5362 14.5525 11.9948 13.4226 12.8105 12.5898C13.6262 11.7571 14.7321 11.2896 15.885 11.2903C17.3618 11.2922 18.6655 12.0471 19.4492 13.1992C19.8212 13.0645 20.2217 12.9912 20.639 12.9914C22.4825 12.9937 23.9966 14.4301 24.1721 16.2671C25.9384 16.6608 27.2602 18.2693 27.2587 20.1924C27.2569 22.4087 25.4983 24.2041 23.3301 24.2032C23.2541 24.2032 23.1786 24.2008 23.1036 24.1965Z" fill="white"/></svg>'}),BX.create("div",{style:{flexGrow:1},children:[BX.create("div",{props:{className:"landing-popup-publication-error-content-block-title"},html:n.getAttribute("data-error-title")||BX.message("LANDING_PUBLICATION_AUTO_OFF")}),BX.create("span",{props:{className:"landing-popup-publication-error-content-block-text"},text:n.getAttribute("data-error-description")})]}),i?BX.create("div",{children:[BX.create("a",{props:{className:"landing-btn-buy-renew ui-btn ui-btn-xs ui-btn-no-caps ui-btn-round"},text:t,events:{click:i}})]}):null]})}else{return false}},onSettingsClick:function(){if(typeof landingParams["PAGE_URL_LANDING_SETTINGS"]!=="undefined"&&typeof BX.SidePanel!=="undefined"){if(this.type==="KNOWLEDGE"||this.type==="GROUP"){BX.SidePanel.Instance.open(landingParams["PAGE_URL_LANDING_SETTINGS"],{events:{onClose:function(){if(top.window["landingSettingsSaved"]===true){top.window["landingSettingsSaved"]=false;window.location.reload()}}}})}else{BX.SidePanel.Instance.open(landingParams["PAGE_URL_LANDING_SETTINGS"])}}}};BX.Landing.Component.View.AutoPublication=function(e){this.blockId=null;this.landingId=null;this.fullPublication=false;this.pendingPublication=false;this.editorEnabled=false;this.pageIsUnActive=e.pageIsUnActive;this.allowedCommands={"Landing::upBlock":true,"Landing::downBlock":true,"Landing::showBlock":true,"Landing::hideBlock":true,"Landing::markDeletedBlock":true,"Landing::addBlock":true,"Landing::copyBlock":true,"Landing::moveBlock":true,"Block::changeNodeName":true,"Block::updateContent":true,"Landing\\Block::addCard":true,"Landing\\Block::cloneCard":true,"Landing\\Block::removeCard":true,"Landing\\Block::updateNodes":true,"Landing\\Block::updateStyles":true};this.fullPublicationCommands={"Landing::upBlock":true,"Landing::downBlock":true,"Landing::addBlock":true,"Landing::copyBlock":true,"Landing::moveBlock":true,"Landing::markDeletedBlock":true};BX.addCustomEvent("BX.Landing.Editor:enable",BX.delegate(this.enableEditor,this));BX.addCustomEvent("BX.Landing.Editor:disable",BX.delegate(this.disableEditor,this));BX.addCustomEvent("BX.Landing.Backend:action",BX.delegate(this.onAction,this));BX.addCustomEvent("BX.Landing.Backend:batch",BX.delegate(this.onAction,this))};BX.Landing.Component.View.AutoPublication.prototype={enableEditor:function(){this.editorEnabled=true},disableEditor:function(){if(this.pendingPublication){this.processing()}this.editorEnabled=false;this.pendingPublication=false},getStatusArea:function(){var e=BX.Landing.PageObject.getRootWindow();return e.document.querySelector("#landing-popup-publication-btn")},getErrorArea:function(){var e=BX.Landing.PageObject.getRootWindow();return e.document.querySelector("#landing-popup-publication-error-area")},resolveEntityId:function(e,n){if(typeof e[n]!=="undefined"){return parseInt(e[n])}var t=Object.keys(e);for(var i=0,a=t.length;i<a;i++){if(typeof e[t[i]].data!=="undefined"&&typeof e[t[i]].data[n]!=="undefined"){return parseInt(e[t[i]].data[n])}}return null},isActionAllowed:function(e){this.fullPublication=this.fullPublicationCommands[e]===true;return this.allowedCommands[e]===true},onAction:function(e,n){if(this.isActionAllowed(e)){this.blockId=this.resolveEntityId(n,"block");this.landingId=this.resolveEntityId(n,"lid");this.revertStatusMessage();if(this.editorEnabled){this.pendingPublication=true}else{this.processing()}}},actualizeStatusMessage:function(){if(!top.window.autoPublicationEnabled){this.revertStatusMessage()}else{this.updateStatusMessage()}},updateStatusMessage:function(){BX.message({LANDING_PAGE_STATUS_UPDATED:BX.message("LANDING_PAGE_STATUS_PUBLIC"),LANDING_PAGE_STATUS_UPDATED_NOW:BX.message("LANDING_PAGE_STATUS_PUBLIC_NOW")});BX.Landing.UI.Panel.StatusPanel.getInstance().update()},revertStatusMessage:function(){BX.message({LANDING_PAGE_STATUS_UPDATED:BX.message("LANDING_PAGE_STATUS_UPDATED_ORIG"),LANDING_PAGE_STATUS_UPDATED_NOW:BX.message("LANDING_PAGE_STATUS_UPDATED_NOW_ORIG")});BX.Landing.UI.Panel.StatusPanel.getInstance().update()},processing:function(){this.actualizeStatusMessage();if(!top.window.autoPublicationEnabled){this.blockId=null;this.landingId=null;return}if(this.blockId||this.fullPublication){setTimeout(function(){BX.addClass(this.getStatusArea(),"landing-ui-panel-top-pub-btn-loader");const e=this.fullPublication||this.pageIsUnActive?"Landing::publication":"Block::publication";BX.Landing.Backend.getInstance().action(e,{block:this.blockId,lid:this.landingId}).then((e=>{this.pageIsUnActive=false;this.setSuccess()})).catch(function(e){if(e.result&&typeof e.result[0]!=="undefined"){this.setError(e.result[0])}else{this.setError({error:"system_error",error_description:"System error"})}}.bind(this));this.blockId=null;this.landingId=null}.bind(this),0)}},setSuccess:function(){var e=this.getErrorArea();var n=this.getStatusArea();e.removeAttribute("data-error");e.removeAttribute("data-error-description");BX.addClass(n,"landing-ui-panel-top-pub-btn-success");BX.removeClass(n,"landing-ui-panel-top-pub-btn-error");BX.removeClass(n,"landing-ui-panel-top-pub-btn-loader");setTimeout(function(){n.style.backgroundColor="";BX.removeClass(n,"landing-ui-panel-top-pub-btn-success")}.bind(this),1e3)},setError:function(e){var n=this.getErrorArea();var t=this.getStatusArea();BX.removeClass(t,"landing-ui-panel-top-pub-btn-loader");BX.addClass(t,"landing-ui-panel-top-pub-btn-error");n.setAttribute("data-error-description",e.error_description);n.setAttribute("data-error",e.error)}};BX.Landing.Component.View.changeTop=function(e,n){n=n||{};if(typeof n.changeState==="undefined"){n.changeState=true}BX.ajax({url:BX.util.add_url_param(window.location.href,{action:"changeTop"}),method:"POST",data:{param:e,sessid:BX.message("bitrix_sessid"),actionType:"json"},dataType:"json",onsuccess:function(e){BX.Landing.Component.View.instance.closeAllPopupsMenu();BX.Landing.Component.View.instance.setNewOptions(e);BX.Landing.Component.View.instance.buildTop({changeState:n.changeState})}})}})();var landingAlertMessage=function e(n,t,i){if(t===true&&(i==="PUBLIC_SITE_REACHED"||i==="PUBLIC_SITE_REACHED_FREE")){(function(){if(landingSiteType==="STORE"){top.BX.UI.InfoHelper.show("limit_shop_number")}else{top.BX.UI.InfoHelper.show("limit_sites_number")}})()}else if(i==="FREE_DOMAIN_IS_NOT_ALLOWED"){top.BX.UI.InfoHelper.show("limit_free_domen")}else if(i==="EMAIL_NOT_CONFIRMED"){top.BX.UI.InfoHelper.show("limit_sites_confirm_email")}else if(t===true&&typeof BX.Landing.PaymentAlertShow!=="undefined"){BX.Landing.PaymentAlertShow({message:n})}else{var a=BX.Landing.UI.Tool.ActionDialog.getInstance();a.show({content:n,confirm:"OK",contentColor:"grey",type:"alert"})}};
/* End */
;
; /* Start:"a:4:{s:4:"full";s:90:"/bitrix/components/bitrix/landing.selector/templates/.default/script.min.js?17407306395643";s:6:"source";s:71:"/bitrix/components/bitrix/landing.selector/templates/.default/script.js";s:3:"min";s:75:"/bitrix/components/bitrix/landing.selector/templates/.default/script.min.js";s:3:"map";s:75:"/bitrix/components/bitrix/landing.selector/templates/.default/script.map.js";}"*/
this.BX=this.BX||{};this.BX.Landing=this.BX.Landing||{};(function(e,a,t){"use strict";var l,i,s,r,n,d,b,o;function c(e,a){h(e,a);a.add(e)}function v(e,a,t){h(e,a);a.set(e,t)}function h(e,a){if(a.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function p(e,a,t){if(!a.has(e)){throw new TypeError("attempted to get private field on non-instance")}return t}var u=new WeakMap;var g=new WeakMap;var H=new WeakMap;var F=new WeakMap;var P=new WeakMap;var w=new WeakMap;var f=new WeakMap;var G=new WeakMap;var S=new WeakMap;var k=new WeakMap;var m=new WeakMap;var L=new WeakMap;var T=new WeakMap;var M=new WeakSet;var W=new WeakSet;var E=new WeakSet;var I=new WeakSet;var A=new WeakSet;var B=new WeakSet;var C=function(){function e(a){babelHelpers.classCallCheck(this,e);c(this,B);c(this,A);c(this,I);c(this,E);c(this,W);c(this,M);v(this,u,{writable:true,value:null});v(this,g,{writable:true,value:void 0});v(this,H,{writable:true,value:void 0});v(this,F,{writable:true,value:void 0});v(this,P,{writable:true,value:void 0});v(this,w,{writable:true,value:void 0});v(this,f,{writable:true,value:void 0});v(this,G,{writable:true,value:void 0});v(this,S,{writable:true,value:void 0});v(this,k,{writable:true,value:void 0});v(this,m,{writable:true,value:void 0});v(this,L,{writable:true,value:void 0});v(this,T,{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(this,g,a.node);babelHelpers.classPrivateFieldSet(this,H,a.input);babelHelpers.classPrivateFieldSet(this,F,a.urlLandingAdd||null);babelHelpers.classPrivateFieldSet(this,P,a.urlFolderAdd||null);babelHelpers.classPrivateFieldSet(this,w,a.urlFormAdd||null);babelHelpers.classPrivateFieldSet(this,f,a.siteType);babelHelpers.classPrivateFieldSet(this,G,a.siteId);this.folderId=a.folderId;this.landingId=a.landingId;babelHelpers.classPrivateFieldSet(this,S,a.items||[]);babelHelpers.classPrivateFieldSet(this,k,a.onSelect);babelHelpers.classPrivateFieldSet(this,m,BX("landing-selector"));if(babelHelpers.classPrivateFieldGet(this,g)){t.Event.bind(babelHelpers.classPrivateFieldGet(this,H),"click",p(this,W,D).bind(this));t.Event.bind(babelHelpers.classPrivateFieldGet(this,H),"input",p(this,B,O).bind(this))}}babelHelpers.createClass(e,[{key:"onAddPage",value:function e(){alert(this.landingId)}},{key:"onAddFolder",value:function e(){alert(this.folderId)}}]);return e}();function X(){if(!babelHelpers.classPrivateFieldGet(this,u)){babelHelpers.classPrivateFieldSet(this,u,new a.Dialog({targetNode:babelHelpers.classPrivateFieldGet(this,g),width:565,height:300,enableSearch:false,dropdownMode:true,showAvatars:true,compactView:false,dynamicLoad:true,multiple:false,context:"landing",entities:[{id:"landing",options:{siteType:babelHelpers.classPrivateFieldGet(this,f),siteId:babelHelpers.classPrivateFieldGet(this,G),landingId:this.landingId}}],items:babelHelpers.classPrivateFieldGet(this,S),events:{onHide:p(this,I,_).bind(this),"Item:onSelect":babelHelpers.classPrivateFieldGet(this,k)},footer:[babelHelpers.classPrivateFieldGet(this,F)?t.Tag.render(l||(l=babelHelpers.taggedTemplateLiteral(['<a href="','" class="ui-selector-footer-link ui-selector-footer-link-add">',"</a>"])),babelHelpers.classPrivateFieldGet(this,F),t.Loc.getMessage("LANDING_SELECTOR_ADD_PAGE")):t.Tag.render(i||(i=babelHelpers.taggedTemplateLiteral([""]))),babelHelpers.classPrivateFieldGet(this,F)?t.Tag.render(s||(s=babelHelpers.taggedTemplateLiteral(['<span class="ui-selector-footer-conjunction">',"</span>"])),t.Loc.getMessage("LANDING_SELECTOR_ADD_OR")):t.Tag.render(r||(r=babelHelpers.taggedTemplateLiteral([""]))),babelHelpers.classPrivateFieldGet(this,P)?t.Tag.render(n||(n=babelHelpers.taggedTemplateLiteral(['<a href="','" class="ui-selector-footer-link">',"</a>"])),babelHelpers.classPrivateFieldGet(this,P),t.Loc.getMessage("LANDING_SELECTOR_ADD_FOLDER")):t.Tag.render(d||(d=babelHelpers.taggedTemplateLiteral([""]))),babelHelpers.classPrivateFieldGet(this,w)?t.Tag.render(b||(b=babelHelpers.taggedTemplateLiteral(['<a href="','" class="ui-selector-footer-link ui-selector-footer-link-add">',"</a>"])),babelHelpers.classPrivateFieldGet(this,w),t.Loc.getMessage("LANDING_SELECTOR_ADD_FORM")):t.Tag.render(o||(o=babelHelpers.taggedTemplateLiteral([""])))]}))}return babelHelpers.classPrivateFieldGet(this,u)}function D(){p(this,E,y).call(this)}function y(){p(this,M,X).call(this).show();p(this,A,N).call(this);BX.addClass(babelHelpers.classPrivateFieldGet(this,g),"landing-selector-active")}function _(){var e=this;if(babelHelpers.classPrivateFieldGet(this,T)===true){BX.addClass(babelHelpers.classPrivateFieldGet(this,L),"landing-selector-overlay-hiding");setTimeout((function(){BX.removeClass(babelHelpers.classPrivateFieldGet(e,L),"landing-selector-overlay-hiding");BX.remove(babelHelpers.classPrivateFieldGet(e,L))}),200);babelHelpers.classPrivateFieldSet(this,T,false)}BX.removeClass(babelHelpers.classPrivateFieldGet(this,g),"landing-selector-active")}function N(){if(!babelHelpers.classPrivateFieldGet(this,L)){babelHelpers.classPrivateFieldSet(this,L,BX.create("div",{props:{className:"landing-selector-overlay"}}))}if(babelHelpers.classPrivateFieldGet(this,T)!==true){document.querySelector(".landing-ui-panel.landing-ui-panel-top").appendChild(babelHelpers.classPrivateFieldGet(this,L));babelHelpers.classPrivateFieldSet(this,T,true)}}function O(e){if(babelHelpers.classPrivateFieldGet(this,u)){babelHelpers.classPrivateFieldGet(this,u).show();babelHelpers.classPrivateFieldGet(this,u).search(e.srcElement.value)}}e.Selector=C})(this.BX.Landing.Component=this.BX.Landing.Component||{},BX.UI.EntitySelector,BX);
/* End */
;
; /* Start:"a:4:{s:4:"full";s:99:"/bitrix/components/bitrix/landing.landing_view/templates/.default/es6/script.min.js?174073063929598";s:6:"source";s:79:"/bitrix/components/bitrix/landing.landing_view/templates/.default/es6/script.js";s:3:"min";s:83:"/bitrix/components/bitrix/landing.landing_view/templates/.default/es6/script.min.js";s:3:"map";s:83:"/bitrix/components/bitrix/landing.landing_view/templates/.default/es6/script.map.js";}"*/
this.BX=this.BX||{};this.BX.Landing=this.BX.Landing||{};(function(e,t,a){"use strict";function i(e,t){n(e,t);t.add(e)}function l(e,t,a){n(e,t);t.set(e,a)}function n(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function s(e,t,a){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return a}var r=new WeakMap;var o=new WeakSet;var c=function(){function e(a){babelHelpers.classCallCheck(this,e);i(this,o);l(this,r,{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(this,r,a.iframe);if(!t.Type.isDomNode(babelHelpers.classPrivateFieldGet(this,r))){throw new Error("Missed 'frame' option as iFrame Element.")}}babelHelpers.createClass(e,[{key:"onDesignerBlockClick",value:function e(t){s(this,o,d).call(this,"onDesignerBlockClick",{blockId:t})}},{key:"onStyleBlockClick",value:function e(t){s(this,o,d).call(this,"onStyleBlockClick",{blockId:t})}},{key:"onEditBlockClick",value:function e(t){s(this,o,d).call(this,"onEditBlockClick",{blockId:t})}},{key:"onSortDownBlockClick",value:function e(t){s(this,o,d).call(this,"onSortDownBlockClick",{blockId:t})}},{key:"onSortUpBlockClick",value:function e(t){s(this,o,d).call(this,"onSortUpBlockClick",{blockId:t})}},{key:"onRemoveBlockClick",value:function e(t){s(this,o,d).call(this,"onRemoveBlockClick",{blockId:t})}},{key:"onChangeStateBlockClick",value:function e(t){s(this,o,d).call(this,"onChangeStateBlockClick",{blockId:t})}},{key:"onCutBlockClick",value:function e(t){s(this,o,d).call(this,"onCutBlockClick",{blockId:t})}},{key:"onCopyBlockClick",value:function e(t){s(this,o,d).call(this,"onCopyBlockClick",{blockId:t})}},{key:"onPasteBlockClick",value:function e(t){s(this,o,d).call(this,"onPasteBlockClick",{blockId:t})}},{key:"onFeedbackClick",value:function e(t){s(this,o,d).call(this,"onFeedbackClick",{blockId:t})}},{key:"onSaveInLibraryClick",value:function e(t){s(this,o,d).call(this,"onSaveInLibraryClick",{blockId:t})}},{key:"onHideEditorPanel",value:function e(){s(this,o,d).call(this,"onHideEditorPanel")}}]);return e}();function d(e,t){babelHelpers.classPrivateFieldGet(this,r).contentWindow.postMessage({action:e,payload:t},window.location.origin)}var u=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,null,[{key:"loadMessages",value:function t(a){e.messages=a}},{key:"getMessage",value:function t(a){return e.messages[a]}}]);return e}();var h,v,p,b,g,f,k,m,w;var C=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,null,[{key:"setPendingMenuItemValue",value:function t(a,i,l,n){if(!e.pendingMenuItems[a]){e.pendingMenuItems[a]={}}if(!e.pendingMenuItems[a][i]){e.pendingMenuItems[a][i]={}}e.pendingMenuItems[a][i][l]=n}},{key:"getPendingMenuItemValue",value:function t(a,i,l){if(e.pendingMenuItems[a]&&e.pendingMenuItems[a][i]){return e.pendingMenuItems[a][i][l]||null}return null}},{key:"getDesignerBlockButton",value:function e(a){var i=u.getMessage("LANDING_TPL_EXT_BUTTON_DESIGNER_BLOCK");var l=t.Tag.render(h||(h=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<button class="landing-ui-button landing-ui-button-action --separate','" type="button" title="','">\n\t\t\t\t<span class="landing-ui-button-text">',"</span>\n\t\t\t</button>\n\t\t"])),a?"":" landing-ui-disabled",i,i);if(a){t.Event.bind(l,"click",a)}return l}},{key:"getStyleBlockButton",value:function e(a){var i=u.getMessage("LANDING_TPL_EXT_BUTTON_STYLE_BLOCK");var l=u.getMessage("LANDING_TPL_EXT_BUTTON_STYLE_BLOCK_TITLE");var n=t.Tag.render(v||(v=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<button class="landing-ui-button landing-ui-button-action --separate','" type="button" title="','">\n\t\t\t\t<span class="landing-ui-button-text">',"</span>\n\t\t\t</button>\n\t\t"])),a?"":" landing-ui-disabled",l,i);if(a){t.Event.bind(n,"click",a)}return n}},{key:"getEditBlockButton",value:function e(a){var i=u.getMessage("LANDING_TPL_EXT_BUTTON_EDIT_BLOCK");var l=u.getMessage("LANDING_TPL_EXT_BUTTON_EDIT_BLOCK_TITLE");var n=t.Tag.render(p||(p=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<button class="landing-ui-button landing-ui-button-action --separate','" type="button" title="','" data-id="content">\n\t\t\t\t<span class="landing-ui-button-text">',"</span>\n\t\t\t</button>\n\t\t"])),a?"":" landing-ui-disabled",l,i);if(a){t.Event.bind(n,"click",a)}return n}},{key:"getLeftContainer",value:function a(i){return t.Tag.render(b||(b=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="landing-ui-external-left-container">\n\t\t\t\t<div class="landing-ui-external-left-top-hr"></div>\n\t\t\t\t<div class="landing-ui-external-body">\n\t\t\t\t\t<div class="landing-ui-external-panel">\n\t\t\t\t\t\t',"\n\t\t\t\t\t\t","\n\t\t\t\t\t\t",'\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="landing-ui-external-left-bottom-hr"></div>\n\t\t\t</div>\n\t\t'])),e.getDesignerBlockButton(i.designerBlockClick),e.getStyleBlockButton(i.styleBlockClick),e.getEditBlockButton(i.editBlockClick))}},{key:"getSortDownBlockButton",value:function e(a){var i=u.getMessage("LANDING_TPL_EXT_BUTTON_DOWN_BLOCK");var l=t.Tag.render(g||(g=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<button class="landing-ui-button landing-ui-button-action','" type="button" data-id="down" title="','"><span class="landing-ui-button-text">&nbsp;</span></button>\n\t\t'])),a?"":" landing-ui-disabled",i);if(a){t.Event.bind(l,"click",a)}return l}},{key:"getSortUpBlockButton",value:function e(a){var i=u.getMessage("LANDING_TPL_EXT_BUTTON_UP_BLOCK");var l=t.Tag.render(f||(f=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<button class="landing-ui-button landing-ui-button-action','" type="button" data-id="up" title="','"><span class="landing-ui-button-text">&nbsp;</span></button>\n\t\t'])),a?"":" landing-ui-disabled",i);if(a){t.Event.bind(l,"click",a)}return l}},{key:"getBlockAdditionalMenu",value:function e(t){return a.MenuManager.getMenuById("block_actions_"+t)}},{key:"closeBlockAdditionalMenu",value:function t(a){var i=e.getBlockAdditionalMenu(a);if(i){i.close()}}},{key:"changeStateMenuItem",value:function t(a,i){var l=e.getBlockAdditionalMenu(a);var n=u.getMessage(!i?"LANDING_TPL_EXT_BUTTON_ACTIONS_SHOW":"LANDING_TPL_EXT_BUTTON_ACTIONS_HIDE");if(l){BX.Landing.Utils.setTextContent(l.getMenuItem("show_hide").getLayout()["text"],n)}else{e.setPendingMenuItemValue(a,"show_hide","state",i)}}},{key:"changePasteMenuItem",value:function t(a,i){var l=e.getBlockAdditionalMenu(a);if(l){var n=l.getMenuItem("paste");if(n){if(i){n.enable()}else{n.disable()}}}else{e.setPendingMenuItemValue(a,"paste","disabled",!i)}}},{key:"getActionsList",value:function i(l,n){var s=u.getMessage("LANDING_TPL_EXT_BUTTON_ACTIONS_BLOCK");var r=u.getMessage("LANDING_TPL_EXT_BUTTON_ACTIONS_BLOCK_TITLE");var o=t.Tag.render(k||(k=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<button class="landing-ui-button landing-ui-button-action" type="button" data-id="actions" title="','">\n\t\t\t\t<span class="landing-ui-button-text">',"</span>\n\t\t\t</button>\n\t\t"])),r,s);t.Event.bind(o,"click",(function(t){if(n.onOpenAdditionalMenu){n.onOpenAdditionalMenu(l);t.stopPropagation()}var i=e.getBlockAdditionalMenu(l);if(i){i.show();return}a.MenuManager.create({id:"block_actions_"+l,bindElement:o,className:"landing-ui-block-actions-popup",angle:{position:"top",offset:95},offsetTop:-6,offsetLeft:-26,items:[new a.MenuItem({id:"show_hide",disabled:!n.changeStateClick,text:u.getMessage(n.state||e.getPendingMenuItemValue(l,"show_hide","state")?"LANDING_TPL_EXT_BUTTON_ACTIONS_HIDE":"LANDING_TPL_EXT_BUTTON_ACTIONS_SHOW"),onclick:function e(){n.changeStateClick()}}),new a.MenuItem({id:"cut",disabled:!n.cutClick,text:u.getMessage("LANDING_TPL_EXT_BUTTON_ACTIONS_CUT"),onclick:function e(){n.cutClick()}}),new a.MenuItem({id:"copy",disabled:!n.copyClick,text:u.getMessage("LANDING_TPL_EXT_BUTTON_ACTIONS_COPY"),onclick:function e(){n.copyClick()}}),new a.MenuItem({id:"paste",disabled:!n.pasteClick||e.getPendingMenuItemValue(l,"paste","disabled"),text:u.getMessage("LANDING_TPL_EXT_BUTTON_ACTIONS_PASTE"),onclick:function e(){n.pasteClick()}}),new a.MenuItem({id:"feedback",disabled:!n.feedbackClick,text:u.getMessage("LANDING_TPL_EXT_BUTTON_ACTIONS_FEEDBACK"),onclick:function e(){n.feedbackClick()}}),n.saveInLibrary?new a.MenuItem({delimiter:true}):null,new a.MenuItem({id:"save_in_library",disabled:!n.saveInLibrary,text:u.getMessage("LANDING_TPL_EXT_BUTTON_ACTIONS_SAVE_IN_LIBRARY"),onclick:function e(){n.saveInLibrary()}})]}).show()}));return o}},{key:"getRemoveBlockButton",value:function e(a){var i=u.getMessage("LANDING_TPL_EXT_BUTTON_REMOVE_BLOCK");var l=t.Tag.render(m||(m=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<button class="landing-ui-button landing-ui-button-action','" type="button" data-id="remove" title="','"><span class="landing-ui-button-text">&nbsp;</span></button>\n\t\t'])),a?"":" landing-ui-disabled",i);if(a){t.Event.bind(l,"click",a)}return l}},{key:"getRightContainer",value:function a(i){return t.Tag.render(w||(w=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="landing-ui-external-right-container">\n\t\t\t\t<div class="landing-ui-external-right-top-hr"></div>\n\t\t\t\t<div class="landing-ui-external-body">\n\t\t\t\t\t<div class="landing-ui-external-panel">\n\t\t\t\t\t\t',"\n\t\t\t\t\t\t","\n\t\t\t\t\t\t","\n\t\t\t\t\t\t",'\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="landing-ui-external-right-bottom-hr"></div>\n\t\t\t</div>\n\t\t'])),e.getSortDownBlockButton(i.sortDownBlockClick),e.getSortUpBlockButton(i.sortUpBlockClick),e.getActionsList(i.blockId,i),e.getRemoveBlockButton(i.removeBlockClick))}}]);return e}();babelHelpers.defineProperty(C,"pendingMenuItems",{});function P(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?P(Object(a),!0).forEach((function(t){babelHelpers.defineProperty(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):P(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function H(e,t){B(e,t);t.add(e)}function T(e,t,a){B(e,t);t.set(e,a)}function B(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function S(e,t,a){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return a}var I=new WeakMap;var _=new WeakMap;var L=new WeakMap;var M=new WeakMap;var G=new WeakMap;var N=new WeakMap;var F=new WeakSet;var E=new WeakSet;var D=new WeakSet;var O=new WeakSet;var x=new WeakSet;var W=new WeakSet;var A=new WeakSet;var U=new WeakSet;var X=new WeakSet;var R=new WeakSet;var j=function e(a){var i=this;babelHelpers.classCallCheck(this,e);H(this,R);H(this,X);H(this,U);H(this,A);H(this,W);H(this,x);H(this,O);H(this,D);H(this,E);H(this,F);T(this,I,{writable:true,value:void 0});T(this,_,{writable:true,value:void 0});T(this,L,{writable:true,value:void 0});T(this,M,{writable:true,value:void 0});T(this,G,{writable:true,value:void 0});T(this,N,{writable:true,value:void 0});a=a||{};babelHelpers.classPrivateFieldSet(this,L,a.container);babelHelpers.classPrivateFieldSet(this,M,a.iframeWrapper);if(!t.Type.isDomNode(babelHelpers.classPrivateFieldGet(this,L))){throw new Error("Missed 'container' option as Dom Node.")}if(!t.Type.isDomNode(babelHelpers.classPrivateFieldGet(this,M))){throw new Error("Missed 'iframe' option as Dom Node.")}babelHelpers.classPrivateFieldSet(this,_,new Map);babelHelpers.classPrivateFieldSet(this,I,new c({iframe:babelHelpers.classPrivateFieldGet(this,M).querySelector("iframe")}));u.loadMessages(a.messages);window.addEventListener("message",S(this,F,V).bind(this));babelHelpers.classPrivateFieldGet(this,L).addEventListener("click",(function(e){babelHelpers.classPrivateFieldGet(i,I).onHideEditorPanel()}));window.addEventListener("storage",S(this,E,q).bind(this))};function V(e){var t=e.data||{};if(!t.payload){return}if(t.action==="register"){S(this,D,K).call(this,t.payload.blocks)}else if(t.action==="showcontrols"){S(this,U,Z).call(this,t.payload.blockId,t.payload.top,t.payload.height)}else if(t.action==="changestate"){S(this,W,J).call(this,t.payload.blockId,t.payload.state)}else if(t.action==="mode"){S(this,R,ee).call(this,t.payload)}else if(t.action==="hideall"){S(this,A,Q).call(this)}else if(t.action==="showblockcontrols"){S(this,A,Q).call(this);S(this,X,$).call(this,t.payload.blockId)}}function q(){var e=babelHelpers.classPrivateFieldGet(this,_).values();var t=!!window.localStorage.getItem("landingBlockId");for(var a=0,i=babelHelpers.classPrivateFieldGet(this,_).size;a<i;a++){var l=e.next().value;C.changePasteMenuItem(l.id,t);S(this,x,Y).call(this,l.id,y(y({},l),{},{permissions:y(y({},l.permissions),{},{allowPaste:t})}))}}function K(e){var a=this;e.map((function(e){var i=e.id;e.leftContainer=C.getLeftContainer({designerBlockClick:e.permissions.allowDesignBlock?function(){babelHelpers.classPrivateFieldGet(a,I).onDesignerBlockClick(i)}:null,styleBlockClick:e.permissions.allowModifyStyles?function(){babelHelpers.classPrivateFieldGet(a,I).onStyleBlockClick(i)}:null,editBlockClick:e.permissions.allowEditContent?function(){babelHelpers.classPrivateFieldGet(a,I).onEditBlockClick(i)}:null});e.rightContainer=C.getRightContainer({blockId:i,state:e.state,sortDownBlockClick:e.permissions.allowSorting?function(){babelHelpers.classPrivateFieldGet(a,I).onSortDownBlockClick(i);S(a,A,Q).call(a)}:null,sortUpBlockClick:e.permissions.allowSorting?function(){babelHelpers.classPrivateFieldGet(a,I).onSortUpBlockClick(i);S(a,A,Q).call(a)}:null,removeBlockClick:e.permissions.allowRemove?function(){babelHelpers.classPrivateFieldGet(a,I).onRemoveBlockClick(i);S(a,A,Q).call(a)}:null,onOpenAdditionalMenu:function e(t){babelHelpers.classPrivateFieldSet(a,N,t);setTimeout((function(){babelHelpers.classPrivateFieldGet(a,I).onHideEditorPanel()}),0)},changeStateClick:e.permissions.allowChangeState?function(){C.closeBlockAdditionalMenu(i);babelHelpers.classPrivateFieldGet(a,I).onChangeStateBlockClick(i);S(a,X,$).call(a,i)}:null,cutClick:e.permissions.allowRemove?function(){babelHelpers.classPrivateFieldGet(a,I).onCutBlockClick(i);S(a,A,Q).call(a)}:null,copyClick:function e(){C.closeBlockAdditionalMenu(i);babelHelpers.classPrivateFieldGet(a,I).onCopyBlockClick(i);S(a,X,$).call(a,i)},pasteClick:function e(){C.closeBlockAdditionalMenu(i);babelHelpers.classPrivateFieldGet(a,I).onPasteBlockClick(i);S(a,X,$).call(a,i)},feedbackClick:function e(){C.closeBlockAdditionalMenu(i);babelHelpers.classPrivateFieldGet(a,I).onFeedbackClick(i)},saveInLibrary:e.permissions.allowSaveInLibrary?function(){C.closeBlockAdditionalMenu(i);babelHelpers.classPrivateFieldGet(a,I).onSaveInLibraryClick(i)}:null});t.Dom.append(e.leftContainer,babelHelpers.classPrivateFieldGet(a,L));t.Dom.append(e.rightContainer,babelHelpers.classPrivateFieldGet(a,L));t.Dom.hide(e.leftContainer);t.Dom.hide(e.rightContainer);babelHelpers.classPrivateFieldGet(a,_).set(i,e)}))}function z(e){return babelHelpers.classPrivateFieldGet(this,_).get(parseInt(e))}function Y(e,t){babelHelpers.classPrivateFieldGet(this,_).set(parseInt(e),t)}function J(e,t){var a=S(this,O,z).call(this,e);if(a){C.changeStateMenuItem(e,t);S(this,x,Y).call(this,e,y(y({},a),{},{state:t}))}}function Q(){if(babelHelpers.classPrivateFieldGet(this,G)){var e=babelHelpers.classPrivateFieldGet(this,_).get(babelHelpers.classPrivateFieldGet(this,G));t.Dom.hide(e.leftContainer);t.Dom.hide(e.rightContainer)}else{var a=babelHelpers.classPrivateFieldGet(this,_).values();for(var i=0,l=babelHelpers.classPrivateFieldGet(this,_).size;i<l;i++){var n=a.next().value;t.Dom.hide(n.leftContainer);t.Dom.hide(n.rightContainer)}}if(babelHelpers.classPrivateFieldGet(this,N)){C.closeBlockAdditionalMenu(babelHelpers.classPrivateFieldGet(this,N));babelHelpers.classPrivateFieldSet(this,N,null)}}function Z(e,a,i){var l=S(this,O,z).call(this,e);if(!l){return}var n=babelHelpers.classPrivateFieldGet(this,M).getBoundingClientRect();S(this,A,Q).call(this);babelHelpers.classPrivateFieldSet(this,G,l.id);babelHelpers.classPrivateFieldGet(this,I).onHideEditorPanel();a=parseInt(a);if(a<0&&i+a>50){i=i+a;a=0;t.Dom.addClass(l.leftContainer,"hide-top");t.Dom.addClass(l.rightContainer,"hide-top")}else{t.Dom.removeClass(l.leftContainer,"hide-top");t.Dom.removeClass(l.rightContainer,"hide-top")}t.Dom.show(l.leftContainer);t.Dom.show(l.rightContainer);l.leftContainer.style.width=n.left+"px";l.leftContainer.style.top=a+"px";l.leftContainer.style.height=i+"px";l.rightContainer.style.width=n.left+"px";l.rightContainer.style.left=n.left+n.width+"px";l.rightContainer.style.top=a+"px";l.rightContainer.style.height=i+"px"}function $(e){var a=this;var i=S(this,O,z).call(this,e);if(i){babelHelpers.classPrivateFieldSet(this,G,null);t.Dom.hide(i.leftContainer);t.Dom.hide(i.rightContainer);setTimeout((function(){babelHelpers.classPrivateFieldSet(a,G,i.id);t.Dom.show(i.leftContainer);t.Dom.show(i.rightContainer)}),500)}}function ee(e){if(e.type==="internal"){S(this,A,Q).call(this)}}var te={defaultDevice:{tablet:"iphone14pro",mobile:"iphone14pro"},devices:{delimiter1:{code:"delimiter",langCode:"LANDING_PREVIEW_DEVICE_MOBILES"},iphone14pro:{name:"iPhone 14 Pro",code:"iphone14pro",className:"--iphone-14-pro",width:393,height:852},iPhoneXR:{name:"iPhone XR",code:"iPhoneXR",className:"--iphone-xr",width:414,height:896},iPhoneSE:{name:"iPhone SE",code:"iPhoneSE",className:"--iphone-se",width:375,height:667},SamsungGalaxyNote10:{name:"Samsung Galaxy Note10",code:"SamsungGalaxyNote10",className:"--samsung-galaxy-note10",width:412,height:896},SamsungGalaxyS8:{name:"Samsung Galaxy S8+",code:"SamsungGalaxyS8",className:"--samsung-galaxy-s8-plus",width:360,height:740},GooglePixel4:{name:"Google Pixel 4",code:"GooglePixel4",className:"--google-pixel-4",width:353,height:745},delimiter2:{code:"delimiter",langCode:"LANDING_PREVIEW_DEVICE_TABLETS"},iPad:{name:"iPad",code:"iPad",className:"--ipad",width:810,height:1080},iPadMini:{name:"iPad Mini",code:"iPadMini",className:"--ipad-mini",width:744,height:1133},SamsungGalaxyTabS8:{name:"Samsung Galaxy Tab S8",code:"SamsungGalaxyTabS8",className:"--samsung-galaxy-tab-s8",width:800,height:1280}}};var ae,ie,le,ne,se;var re=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,null,[{key:"getPreview",value:function a(i){if(i.messages){e.messages=i.messages}if(!localStorage.getItem("deviceOrientation")){localStorage.setItem("deviceOrientation","portrait")}var l=function e(a){localStorage.setItem("deviceHidden",!t.Dom.hasClass(r.switcher,"landing-switcher-hide"));t.Dom.toggleClass(r.switcher,"landing-switcher-hide");t.Dom.toggleClass(r.wrapper,"landing-device-wrapper-hidden")};var n=function e(t){if(localStorage.getItem("deviceOrientation")==="portrait"){localStorage.setItem("deviceOrientation","landscape")}else{localStorage.setItem("deviceOrientation","portrait")}r.wrapper.style.setProperty("width","".concat(r.wrapper.offsetHeight,"px"));r.wrapper.style.setProperty("height","".concat(r.wrapper.offsetWidth,"px"));r.frame.style.setProperty("width","".concat(r.frame.offsetHeight,"px"));r.frame.style.setProperty("height","".concat(r.frame.offsetWidth,"px"));r.wrapper.querySelector('[data-role="device-orientation"]').innerHTML=localStorage.getItem("deviceOrientation")};var s=localStorage.getItem("deviceHidden")==="true";var r={wrapper:t.Tag.render(ae||(ae=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="landing-device-wrapper','">\n\t\t\t\t\t<div class="landing-device-name" onclick="','">\n\t\t\t\t\t\t<span data-role="device-name">Device</span>\n\t\t\t\t\t\t<span data-role="device-orientation" class="landing-device-orientation">Orientation</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t'])),s?" landing-device-wrapper-hidden":"",i.clickHandler),switcher:t.Tag.render(ie||(ie=babelHelpers.taggedTemplateLiteral(['<div class="landing-device-switcher','" onclick="','" data-role="landing-device-switcher"></div>'])),s?" landing-switcher-hide":"",l),rotate:t.Tag.render(le||(le=babelHelpers.taggedTemplateLiteral(['<div class="landing-device-rotate" onclick="','" data-role="landing-device-rotate"></div>'])),n),frame:t.Tag.render(ne||(ne=babelHelpers.taggedTemplateLiteral(['<iframe data-role="landing-device-preview-iframe" src="','"></iframe>'])),i.frameUrl),frameWrapper:t.Tag.render(se||(se=babelHelpers.taggedTemplateLiteral(['<div class="landing-device-preview" data-role="landing-device-preview"></div>'])))};r.wrapper.appendChild(r.switcher);r.wrapper.appendChild(r.rotate);r.wrapper.appendChild(r.frameWrapper);r.frameWrapper.appendChild(r.frame);return r.wrapper}},{key:"openDeviceMenu",value:function t(i,l,n){var s="device_selector";var r=a.MenuManager.getMenuById(s);if(r){r.show();return}var o=[];l.map((function(t){if(t.code==="delimiter"){o.push(new a.MenuItem({delimiter:true,text:t.langCode?e.messages[t.langCode]:""}));return}o.push(new a.MenuItem({id:t.className,html:"".concat(t.name),onclick:function e(){a.MenuManager.getMenuById(s).close();n(t)}}))}));if(i){i=i.parentNode}r=a.MenuManager.create({id:s,bindElement:i,className:"landing-ui-block-actions-popup",items:o,angle:true,offsetTop:0,offsetLeft:40,minWidth:i.offsetWidth,animation:"fading-slide"});r.show()}}]);return e}();var oe;function ce(e,t){ue(e,t);t.add(e)}function de(e,t,a){ue(e,t);t.set(e,a)}function ue(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function he(e,t,a){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return a}var ve=new WeakMap;var pe=new WeakMap;var be=new WeakMap;var ge=new WeakMap;var fe=new WeakMap;var ke=new WeakMap;var me=new WeakMap;var we=new WeakMap;var Ce=new WeakMap;var Pe=new WeakMap;var ye=new WeakSet;var He=new WeakSet;var Te=new WeakSet;var Be=new WeakSet;var Se=new WeakSet;var Ie=new WeakSet;var _e=new WeakSet;var Le=new WeakSet;var Me=new WeakSet;var Ge=new WeakSet;var Ne=new WeakSet;var Fe=new WeakSet;var Ee=new WeakSet;var De=new WeakSet;var Oe=function e(t){babelHelpers.classCallCheck(this,e);ce(this,De);ce(this,Ee);ce(this,Fe);ce(this,Ne);ce(this,Ge);ce(this,Me);ce(this,Le);ce(this,_e);ce(this,Ie);ce(this,Se);ce(this,Be);ce(this,Te);ce(this,He);ce(this,ye);de(this,ve,{writable:true,value:void 0});de(this,pe,{writable:true,value:void 0});de(this,be,{writable:true,value:void 0});de(this,ge,{writable:true,value:void 0});de(this,fe,{writable:true,value:void 0});de(this,ke,{writable:true,value:void 0});de(this,me,{writable:true,value:null});de(this,we,{writable:true,value:false});de(this,Ce,{writable:true,value:false});de(this,Pe,{writable:true,value:["Landing::upBlock","Landing::downBlock","Landing::showBlock","Landing::hideBlock","Landing::markDeletedBlock","Landing::addBlock","Landing::copyBlock","Landing::moveBlock","Block::changeNodeName","Block::updateContent","Block::getContent","Landing\\Block::addCard","Landing\\Block::cloneCard","Landing\\Block::removeCard","Landing\\Block::updateNodes","Landing\\Block::updateStyles","Landing\\Block::saveForm"]});babelHelpers.classPrivateFieldSet(this,pe,t.frameUrl);babelHelpers.classPrivateFieldSet(this,be,t.editorFrameWrapper);babelHelpers.classPrivateFieldSet(this,ve,t);he(this,ye,xe).call(this,t);he(this,Ne,ze).call(this,t);he(this,Ee,Je).call(this);he(this,Me,qe).call(this,he(this,Se,Xe).call(this,"mobile"))};function xe(e){var t=this;BX.addCustomEvent("BX.Landing.Main:editorSizeChange",(function(e){he(t,Me,qe).call(t,he(t,Se,Xe).call(t,e))}));window.addEventListener("message",(function(e){var a=e.data||{};if(a.action==="editorenable"){if(!!a.payload.enable){babelHelpers.classPrivateFieldSet(t,we,true)}else{if(babelHelpers.classPrivateFieldGet(t,Ce)){he(t,Te,Ae).call(t)}babelHelpers.classPrivateFieldSet(t,we,false);babelHelpers.classPrivateFieldSet(t,Ce,false)}}else if(a.action==="backendaction"){he(t,He,We).call(t,a.payload)}}))}function We(e){if(babelHelpers.classPrivateFieldGet(this,Pe).includes(e.action)){if(babelHelpers.classPrivateFieldGet(this,we)){babelHelpers.classPrivateFieldSet(this,Ce,true)}else{var t,a,i,l;var n=null;if((t=e.data)!==null&&t!==void 0&&t.block){var s;n=(s=e.data)===null||s===void 0?void 0:s.block}if((a=e.data)!==null&&a!==void 0&&(i=a.updateNodes)!==null&&i!==void 0&&(l=i.data)!==null&&l!==void 0&&l.block){var r,o,c;n=(r=e.data)===null||r===void 0?void 0:(o=r.updateNodes)===null||o===void 0?void 0:(c=o.data)===null||c===void 0?void 0:c.block}he(this,Te,Ae).call(this,n)}}}function Ae(e){if(babelHelpers.classPrivateFieldGet(this,fe)){var t="editor";var a=Date.now();babelHelpers.classPrivateFieldGet(this,fe).location.href=babelHelpers.classPrivateFieldGet(this,pe)+"?ts="+a+"&scrollTo="+t+e}}function Ue(e){if(babelHelpers.classPrivateFieldGet(this,fe)){var t=babelHelpers.classPrivateFieldGet(this,fe).document;var a=Math.max(t.body.scrollHeight,t.documentElement.scrollHeight,t.body.offsetHeight,t.documentElement.offsetHeight,t.body.clientHeight,t.documentElement.clientHeight);babelHelpers.classPrivateFieldGet(this,fe).scroll(0,a*e/100)}}function Xe(e){var t;var a=localStorage.getItem("deviceCode");if(a&&te.devices[a]){return te.devices[a]}a=(t=te.defaultDevice)===null||t===void 0?void 0:t[e];if(!a){return}return te.devices[a]}function Re(){if(!babelHelpers.classPrivateFieldGet(this,ke)){u.loadMessages(babelHelpers.classPrivateFieldGet(this,ve).messages);babelHelpers.classPrivateFieldSet(this,ke,t.Tag.render(oe||(oe=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="landing-device-loader">\n\t\t\t\t\t<div class="landing-device-loader-icon"></div>\n\t\t\t\t\t<div class="landing-device-loader-text">',"</div>\n\t\t\t\t</div>\n\t\t\t"])),u.getMessage("LANDING_TPL_PREVIEW_LOADING")))}return babelHelpers.classPrivateFieldGet(this,ke)}function je(e){if(!e){return}t.Dom.append(he(this,Ie,Re).call(this),e)}function Ve(){var e=this;t.Dom.addClass(he(this,Ie,Re).call(this),"--hide");t.Event.bind(he(this,Ie,Re).call(this),"transitionend",(function(){t.Dom.remove(he(e,Ie,Re).call(e))}))}function qe(e){var a=this;if(!e){return}localStorage.setItem("deviceCode",e.code);if(babelHelpers.classPrivateFieldGet(this,me)){t.Dom.removeClass(babelHelpers.classPrivateFieldGet(this,ge),babelHelpers.classPrivateFieldGet(this,me).className);babelHelpers.classPrivateFieldGet(this,ge).style.removeProperty("top")}babelHelpers.classPrivateFieldSet(this,me,e);babelHelpers.classPrivateFieldGet(this,ge).querySelector('[data-role="device-name"]').innerHTML=e.name;babelHelpers.classPrivateFieldGet(this,ge).querySelector('[data-role="device-orientation"]').innerHTML=localStorage.getItem("deviceOrientation");var i=babelHelpers.classPrivateFieldGet(this,ge).querySelector('[data-role="landing-device-preview-iframe"]');var l=babelHelpers.classPrivateFieldGet(this,ge).querySelector('[data-role="landing-device-preview"]');i.onload=function(){return he(a,Le,Ve).call(a)};if(i&&l&&babelHelpers.classPrivateFieldGet(this,me).width&&babelHelpers.classPrivateFieldGet(this,me).height){var n=window.innerHeight/(babelHelpers.classPrivateFieldGet(this,me).height+300);var s=parseInt(window.getComputedStyle(l).padding);var r=babelHelpers.classPrivateFieldGet(this,me).width;var o=babelHelpers.classPrivateFieldGet(this,me).height;if(localStorage.getItem("deviceOrientation")==="landscape"){r=babelHelpers.classPrivateFieldGet(this,me).height;o=babelHelpers.classPrivateFieldGet(this,me).width}i.style.setProperty("width","".concat(r,"px"));i.style.setProperty("height","".concat(o,"px"));l.style.setProperty("transform","scale(".concat(n,")"));babelHelpers.classPrivateFieldGet(this,ge).style.setProperty("width","".concat((r+s*2)*n,"px"));babelHelpers.classPrivateFieldGet(this,ge).style.setProperty("height","".concat((o+s*2)*n,"px"))}t.Dom.addClass(babelHelpers.classPrivateFieldGet(this,ge),babelHelpers.classPrivateFieldGet(this,me).className)}function Ke(){var e=babelHelpers.classPrivateFieldGet(this,be).querySelector("iframe").contentWindow.document;var t=Math.max(e.body.scrollHeight,e.documentElement.scrollHeight,e.body.offsetHeight,e.documentElement.offsetHeight,e.body.clientHeight,e.documentElement.clientHeight);var a=e.documentElement.scrollTop||e.body.scrollTop;he(this,Be,Ue).call(this,a/t*100)}function ze(e){if(!babelHelpers.classPrivateFieldGet(this,ge)){babelHelpers.classPrivateFieldSet(this,ge,re.getPreview({frameUrl:e.frameUrl,clickHandler:he(this,Fe,Ye).bind(this),messages:e.messages}));t.Dom.hide(babelHelpers.classPrivateFieldGet(this,ge));document.body.appendChild(babelHelpers.classPrivateFieldGet(this,ge));if(!babelHelpers.classPrivateFieldGet(this,fe)){babelHelpers.classPrivateFieldSet(this,fe,babelHelpers.classPrivateFieldGet(this,ge).querySelector("iframe").contentWindow);var a=babelHelpers.classPrivateFieldGet(this,ge).querySelector("iframe").contentWindow.document;t.Dom.removeClass(a.querySelector("html"),"bx-no-touch");t.Dom.addClass(a.querySelector("html"),"bx-touch")}he(this,Ge,Ke).call(this)}}function Ye(){re.openDeviceMenu(babelHelpers.classPrivateFieldGet(this,ge).querySelector('[data-role="device-name"]'),Object.values(te.devices),he(this,Me,qe).bind(this))}function Je(){t.Dom.show(babelHelpers.classPrivateFieldGet(this,ge));he(this,_e,je).call(this,babelHelpers.classPrivateFieldGet(this,ge))}e.ExternalControls=j;e.Device=Oe})(this.BX.Landing.View=this.BX.Landing.View||{},BX,BX.Main);
/* End */
;; /* /bitrix/components/bitrix/landing.landing_view/templates/.default/script.min.js?174073063932015*/
; /* /bitrix/components/bitrix/landing.selector/templates/.default/script.min.js?17407306395643*/
; /* /bitrix/components/bitrix/landing.landing_view/templates/.default/es6/script.min.js?174073063929598*/

//# sourceMappingURL=page_22bced8f20e4167f3e49d95b224cd20b.map.js